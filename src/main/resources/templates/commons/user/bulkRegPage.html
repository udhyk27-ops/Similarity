<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>bulkReg</title>
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron Sung HK:wght@400;700&display=swap" rel="stylesheet">
    <script th:src="@{/js/fileUpload.js}"></script>
    <style>
        .upload-row {
            display: flex;
            /*gap: 20px;*/
        }
        .upload-row .upload-box {
            flex: 3;
        }
        .page-title{
            margin-bottom: unset;
        }
        .upload-row .filelist-box {
            flex: 7;
            border-left: 1px solid #eee;
        }
        .info-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px;
        }
        .sch-table tr td{
            border: 1px solid var(--border);
            color: var(--text-light);
            font-size: 14px;
            height: 30px;
        }
        .label {
            background: var(--muted);
            color: var(--text-light);
            width: 120px;
            font-weight: 600;
        }
        .file-box {
            border: 2px dashed #cacaca;
            padding: 5px;
            cursor: pointer;
            text-align: center;
            border-radius: 6px;
        }
        .file-box:hover {
            border-color: var(--border);
            transform: scale(1.05);
        }

        .file-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        .file-item {
            display: inline-flex;
            align-items: center;
            background: var(--bg);
            border: 1px solid var(--border);
            padding: 3px 10px;
            border-radius: 6px;
            font-size: 14px;
            /*margin-right: 6px;*/
        }
        .delete-btn {
            margin-left: 6px;
            cursor: pointer;
            color: #f1575b;
            text-decoration: none;
            font-weight: bold;
        }
        .delete-btn:hover {
            color: var(--dark-pink);
            text-decoration: none;
        }
        .info-row .info-title{
            font-size: 17px;
            font-weight: 500;
        }
        .content{
            text-align: start;!important;
        }
        .cnt-row{
            margin: 20px 0 0 20px;
        }
        .table{
            margin: 20px 15px 0 15px;
        }
        .cnt-text{
            font-weight: bold;
        }
        .buttons {
            padding-top: 16px;
            display: flex;
            justify-content: space-between;
            margin-left: 15px;
        }
        .buttons .btn {
            padding: 8px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
        }
        * {
            box-sizing: border-box;
        }

        :root {
            --clr-white: rgb(255, 255, 255);
            --clr-black: rgb(0, 0, 0);
            --clr-light: rgb(245, 248, 255);
            --clr-light-gray: rgb(196, 195, 196);
            --clr-blue: rgb(63, 134, 255);
            --clr-light-blue: rgb(171, 202, 255);
        }

        /* End General Styles */

        /* Upload Area */
        .upload-area {
            width: 100%;
            max-width: 25rem;
            background-color: var(--clr-white);
            box-shadow: 0 10px 60px rgb(218, 229, 255);
            border: 2px solid var(--clr-light-blue);
            border-radius: 24px;
            padding: 2rem 1.875rem 5rem 1.875rem;
            margin: 0.625rem;
            text-align: center;
        }

        .upload-area--open { /* Slid Down Animation */
            animation: slidDown 500ms ease-in-out;
        }

        @keyframes slidDown {
            from {
                height: 28.125rem; /* 450px */
            }

            to {
                height: 35rem; /* 560px */
            }
        }

        /* Header */
        .upload-area__header {

        }

        .upload-area__title {
            font-size: 1.8rem;
            font-weight: 500;
            margin-bottom: 0.3125rem;
        }

        .upload-area__paragraph {
            font-size: 0.9375rem;
            color: var(--clr-light-gray);
            margin-top: 0;
        }

        .upload-area__tooltip {
            position: relative;
            color: var(--clr-light-blue);
            cursor: pointer;
            transition: color 300ms ease-in-out;
        }

        .upload-area__tooltip:hover {
            color: var(--clr-blue);
        }

        .upload-area__tooltip-data {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -125%);
            min-width: max-content;
            background-color: var(--clr-white);
            color: var(--clr-blue);
            border: 1px solid var(--clr-light-blue);
            padding: 0.625rem 1.25rem;
            font-weight: 500;
            opacity: 0;
            visibility: hidden;
            transition: none 300ms ease-in-out;
            transition-property: opacity, visibility;
        }

        .upload-area__tooltip:hover .upload-area__tooltip-data {
            opacity: 1;
            visibility: visible;
        }

        /* Drop Zoon */
        .upload-area__drop-zoon {
            position: relative;
            height: 11.25rem; /* 180px */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            border: 2px dashed var(--clr-light-blue);
            border-radius: 15px;
            margin-top: 2.1875rem;
            cursor: pointer;
            transition: border-color 300ms ease-in-out;
        }

        .upload-area__drop-zoon:hover {
            border-color: var(--clr-blue);
        }

        .drop-zoon__icon {
            display: flex;
            font-size: 3.75rem;
            color: var(--clr-blue);
            transition: opacity 300ms ease-in-out;
        }

        .drop-zoon__paragraph {
            font-size: 0.9375rem;
            color: var(--clr-light-gray);
            margin: 0;
            margin-top: 0.625rem;
            transition: opacity 300ms ease-in-out;
        }

        .drop-zoon:hover .drop-zoon__icon,
        .drop-zoon:hover .drop-zoon__paragraph {
            opacity: 0.7;
        }

        .drop-zoon__loading-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            color: var(--clr-light-blue);
            z-index: 10;
        }

        .drop-zoon__preview-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 0.3125rem;
            border-radius: 10px;
            display: none;
            z-index: 1000;
            transition: opacity 300ms ease-in-out;
        }

        .drop-zoon:hover .drop-zoon__preview-image {
            opacity: 0.8;
        }

        .drop-zoon__file-input {
            display: none;
        }

        /* (drop-zoon--over) Modifier Class */
        .drop-zoon--over {
            border-color: var(--clr-blue);
        }

        .drop-zoon--over .drop-zoon__icon,
        .drop-zoon--over .drop-zoon__paragraph {
            opacity: 0.7;
        }

        /* (drop-zoon--over) Modifier Class */
        .drop-zoon--Uploaded {

        }

        .drop-zoon--Uploaded .drop-zoon__icon,
        .drop-zoon--Uploaded .drop-zoon__paragraph {
            display: none;
        }

        /* File Details Area */
        .upload-area__file-details {
            height: 0;
            visibility: hidden;
            opacity: 0;
            text-align: left;
            transition: none 500ms ease-in-out;
            transition-property: opacity, visibility;
            transition-delay: 500ms;
        }

        /* (duploaded-file--open) Modifier Class */
        .file-details--open {
            height: auto;
            visibility: visible;
            opacity: 1;
        }

        .file-details__title {
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--clr-light-gray);
        }

        /* Uploaded File */
        .uploaded-file {
            display: flex;
            align-items: center;
            padding: 0.625rem 0;
            visibility: hidden;
            opacity: 0;
            transition: none 500ms ease-in-out;
            transition-property: visibility, opacity;
        }

        /* (duploaded-file--open) Modifier Class */
        .uploaded-file--open {
            visibility: visible;
            opacity: 1;
        }

        .uploaded-file__icon-container {
            position: relative;
            margin-right: 0.3125rem;
        }

        .uploaded-file__icon {
            font-size: 3.4375rem;
            color: var(--clr-blue);
        }

        .uploaded-file__icon-text {
            position: absolute;
            top: 1.5625rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--clr-white);
        }

        .uploaded-file__info {
            position: relative;
            top: -0.3125rem;
            width: 100%;
            display: flex;
            justify-content: space-between;
        }

        .uploaded-file__info::before,
        .uploaded-file__info::after {
            content: '';
            position: absolute;
            bottom: -0.9375rem;
            width: 0;
            height: 0.5rem;
            background-color: #ebf2ff;
            border-radius: 0.625rem;
        }

        .uploaded-file__info::before {
            width: 100%;
        }

        .uploaded-file__info::after {
            width: 100%;
            background-color: var(--clr-blue);
        }

        /* Progress Animation */
        .uploaded-file__info--active::after {
            animation: progressMove 800ms ease-in-out;
            animation-delay: 300ms;
        }

        @keyframes progressMove {
            from {
                width: 0%;
                background-color: transparent;
            }

            to {
                width: 100%;
                background-color: var(--clr-blue);
            }
        }

        .uploaded-file__name {
            width: 100%;
            max-width: 6.25rem; /* 100px */
            display: inline-block;
            font-size: 1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .uploaded-file__counter {
            font-size: 1rem;
            color: var(--clr-light-gray);
        }
    </style>
</head>
<body>
<!-- HEADER FRAGMENT -->
<header class="header">
    <th:block th:replace="~{commons/fragments/headerPage.html :: header}"></th:block>
</header>

<div class="container">

    <!-- SIDEBAR FRAGMENT -->
    <div class="navbar">
        <th:block th:replace="~{commons/fragments/navbarPage.html :: navbar}"></th:block>
    </div>

    <!-- MAIN CONTENT -->
    <main class="main">


        <!-- CONTENT AREA -->
        <div class="content">
            <div class="dashboard-grid">

                <div class="card">

                    <div class="main-title">
                        <th:block th:replace="~{commons/fragments/mainTitlePage.html :: mainTitle('ÎåÄÎüâÎì±Î°ù')}"></th:block>
                    </div>
                    <div class="upload-row">
                        <div class="upload-box">
                            <div class="info-row">
                                <span class="info-title">ÏûëÌíà Î©îÌÉÄÏ†ïÎ≥¥ ÏóÖÎ°úÎìú</span>
                                <button class="btn-white">ÏñëÏãùÎã§Ïö¥Î°úÎìú</button>
                            </div>
                            <form id="fileUploadForm" enctype="multipart/form-data">
                                <div class="file-upload">
                                        <label class="file-box">
                                            <input type="file" id="fileInput" name="files" accept="image/*" multiple style="display:none;">
                                            üìÅ ÌååÏùºÏ≤®Î∂Ä
                                        </label>
                                        <div id="fileList"></div>
                                </div>
                                <div class="info-row">
                                    <span class="info-title">ÏÇ¨ÏßÑ ÌååÏùº ÏóÖÎ°úÎìú</span>
                                </div>
                                <div class="file-upload">
                                    <!-- Upload Area -->
                                    <div id="uploadArea" class="upload-area">
                                        <!-- Header -->
                                        <div class="upload-area__header">
                                            <h1 class="upload-area__title">Upload your file</h1>
                                            <p class="upload-area__paragraph">
                                                File should be an image
                                                <strong class="upload-area__tooltip">
                                                    Like
                                                    <span class="upload-area__tooltip-data"></span> <!-- Data Will be Comes From Js -->
                                                </strong>
                                            </p>
                                        </div>
                                        <!-- End Header -->

                                        <!-- Drop Zoon -->
                                        <div id="dropZoon" class="upload-area__drop-zoon drop-zoon">
    <span class="drop-zoon__icon">
      <i class='bx bxs-file-image'></i>
    </span>
                                            <p class="drop-zoon__paragraph">Drop your file here or Click to browse</p>
                                            <span id="loadingText" class="drop-zoon__loading-text">Please Wait</span>
                                            <img src="" alt="Preview Image" id="previewImage" class="drop-zoon__preview-image" draggable="false">
                                            <input type="file" id="fileInput" class="drop-zoon__file-input" accept="image/*">
                                        </div>
                                        <!-- End Drop Zoon -->

                                        <!-- File Details -->
                                        <div id="fileDetails" class="upload-area__file-details file-details">
                                            <h3 class="file-details__title">Uploaded File</h3>

                                            <div id="uploadedFile" class="uploaded-file">
                                                <div class="uploaded-file__icon-container">
                                                    <i class='bx bxs-file-blank uploaded-file__icon'></i>
                                                    <span class="uploaded-file__icon-text"></span> <!-- Data Will be Comes From Js -->
                                                </div>

                                                <div id="uploadedFileInfo" class="uploaded-file__info">
                                                    <span class="uploaded-file__name">Proejct 1</span>
                                                    <span class="uploaded-file__counter">0%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- End File Details -->
                                    </div>
                                    <!-- End Upload Area -->
                                </div>
                            </form>
                        </div>
                        <div class="filelist-box">
                            <div class="cnt-row">ÌååÏùº Ïàò : <span class="cnt-text">100</span> Í∞ú</div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Î≤àÌò∏</th>
                                        <th>Ïù¥ÎØ∏ÏßÄ</th>
                                        <th>Ï†úÎ™©</th>
                                        <th>Ï†ÄÏûëÏûêÎ™Ö</th>
                                        <th>Í≥µÎ™®Ï†ÑÎ™Ö/ÏÉÅÍ∂åÎ™Ö</th>
                                        <th>Ï£ºÏµú/Ï£ºÍ¥Ä</th>
                                        <th>Î∞úÌëúÎÖÑÎèÑ</th>
                                        <th>Îì±Î°ùÏùºÏãú</th>
                                        <th>ÏÇ≠Ï†ú</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>3</td>
                                        <td>Ïù¥ÎØ∏ÏßÄ</td>
                                        <td class="artwork-title">Ïñ¥ÎîîÏÑú Î¨¥ÏóáÏù¥ ÎêòÏñ¥ Îã§Ïãú ÎßåÎÇòÎû¥</td>
                                        <td>ÌôçÍ∏∏Îèô</td>
                                        <td>2023 Ï£ºÎãàÏñ¥Ìï¥ÏñëÌîºÏºìÏ±åÎ¶∞ÏßÄ ÎåÄÏÉÅ</td>
                                        <td>ÏÇºÏÑ±Ï†ÑÏûê/ÏÑúÏö∏Ïãú</td>
                                        <td>2017ÎÖÑ</td>
                                        <td>2023-03-21 16:32:24</td>
                                        <td><button class="btn-pink">ÏÇ≠Ï†ú</button></td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Ïù¥ÎØ∏ÏßÄ</td>
                                        <td class="artwork-title">Íµ¨Î¶Ñ ÏÜç Î∂âÏùÄ Îπõ Í∑∏Î¶¨Í≥† ÎèÑÏãúÏïºÍ≤Ω</td>
                                        <td>ÌôçÍ∏∏Îèô</td>
                                        <td>2023 Ï£ºÎãàÏñ¥Ìï¥ÏñëÌîºÏºìÏ±åÎ¶∞ÏßÄ Ïö∞ÏàòÏÉÅ</td>
                                        <td>ÏÇºÏÑ±Ï†ÑÏûê/ÏÑúÏö∏Ïãú</td>
                                        <td>2017ÎÖÑ</td>
                                        <td>2023-03-21 16:32:24</td>
                                        <td><button class="btn-pink">ÏÇ≠Ï†ú</button></td>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>Ïù¥ÎØ∏ÏßÄ</td>
                                        <td class="artwork-title">Îàà ÎÇ¥Î¶¨Îäî ÎÇ†Ïùò Ïô∏Ï∂ú</td>
                                        <td>ÌôçÍ∏∏Îèô</td>
                                        <td>2023 Ï£ºÎãàÏñ¥Ìï¥ÏñëÌîºÏºìÏ±åÎ¶∞ÏßÄ Ïû•Î†§</td>
                                        <td>ÏÇºÏÑ±Ï†ÑÏûê/ÏÑúÏö∏Ïãú</td>
                                        <td>2017ÎÖÑ</td>
                                        <td>2023-03-21 16:32:24</td>
                                        <td><button class="btn-pink">ÏÇ≠Ï†ú</button></td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="buttons">
                                <div>
                                    <button class="btn btn-pink">ÏÑ†ÌÉùÏÇ≠Ï†ú</button>
                                </div>
                                <div class="right-btns">
                                    <button class="btn btn-navy">Îì±Î°ùÌïòÍ∏∞</button>
                                </div>
                            </div>
<!--                            <div class="pagination">-->
<!--                                <a href="#" class="page-btn prev">¬´</a>-->

<!--                                <a href="#" class="page-btn active">1</a>-->
<!--                                <a href="#" class="page-btn">2</a>-->
<!--                                <a href="#" class="page-btn">3</a>-->
<!--                                <a href="#" class="page-btn">4</a>-->
<!--                                <a href="#" class="page-btn">5</a>-->

<!--                                <a href="#" class="page-btn next">¬ª</a>-->
<!--                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

</div>
<script>
    const uploadArea = document.querySelector('#uploadArea')

    // Select Drop-Zoon Area
    const dropZoon = document.querySelector('#dropZoon');

    // Loading Text
    const loadingText = document.querySelector('#loadingText');

    // Slect File Input
    const fileInput = document.querySelector('#fileInput');

    // Select Preview Image
    const previewImage = document.querySelector('#previewImage');

    // File-Details Area
    const fileDetails = document.querySelector('#fileDetails');

    // Uploaded File
    const uploadedFile = document.querySelector('#uploadedFile');

    // Uploaded File Info
    const uploadedFileInfo = document.querySelector('#uploadedFileInfo');

    // Uploaded File  Name
    const uploadedFileName = document.querySelector('.uploaded-file__name');

    // Uploaded File Icon
    const uploadedFileIconText = document.querySelector('.uploaded-file__icon-text');

    // Uploaded File Counter
    const uploadedFileCounter = document.querySelector('.uploaded-file__counter');

    // ToolTip Data
    const toolTipData = document.querySelector('.upload-area__tooltip-data');

    // Images Types
    const imagesTypes = [
        "jpeg",
        "png",
        "svg",
        "gif"
    ];

    // Append Images Types Array Inisde Tooltip Data
    toolTipData.innerHTML = [...imagesTypes].join(', .');

    // When (drop-zoon) has (dragover) Event
    dropZoon.addEventListener('dragover', function (event) {
        // Prevent Default Behavior
        event.preventDefault();

        // Add Class (drop-zoon--over) On (drop-zoon)
        dropZoon.classList.add('drop-zoon--over');
    });

    // When (drop-zoon) has (dragleave) Event
    dropZoon.addEventListener('dragleave', function (event) {
        // Remove Class (drop-zoon--over) from (drop-zoon)
        dropZoon.classList.remove('drop-zoon--over');
    });

    // When (drop-zoon) has (drop) Event
    dropZoon.addEventListener('drop', function (event) {
        // Prevent Default Behavior
        event.preventDefault();

        // Remove Class (drop-zoon--over) from (drop-zoon)
        dropZoon.classList.remove('drop-zoon--over');

        // Select The Dropped File
        const file = event.dataTransfer.files[0];

        // Call Function uploadFile(), And Send To Her The Dropped File :)
        uploadFile(file);
    });

    // When (drop-zoon) has (click) Event
    dropZoon.addEventListener('click', function (event) {
        // Click The (fileInput)
        fileInput.click();
    });

    // When (fileInput) has (change) Event
    fileInput.addEventListener('change', function (event) {
        // Select The Chosen File
        const file = event.target.files[0];

        // Call Function uploadFile(), And Send To Her The Chosen File :)
        uploadFile(file);
    });

    // Upload File Function
    function uploadFile(file) {
        // FileReader()
        const fileReader = new FileReader();
        // File Type
        const fileType = file.type;
        // File Size
        const fileSize = file.size;

        // If File Is Passed from the (File Validation) Function
        if (fileValidate(fileType, fileSize)) {
            // Add Class (drop-zoon--Uploaded) on (drop-zoon)
            dropZoon.classList.add('drop-zoon--Uploaded');

            // Show Loading-text
            loadingText.style.display = "block";
            // Hide Preview Image
            previewImage.style.display = 'none';

            // Remove Class (uploaded-file--open) From (uploadedFile)
            uploadedFile.classList.remove('uploaded-file--open');
            // Remove Class (uploaded-file__info--active) from (uploadedFileInfo)
            uploadedFileInfo.classList.remove('uploaded-file__info--active');

            // After File Reader Loaded
            fileReader.addEventListener('load', function () {
                // After Half Second
                setTimeout(function () {
                    // Add Class (upload-area--open) On (uploadArea)
                    uploadArea.classList.add('upload-area--open');

                    // Hide Loading-text (please-wait) Element
                    loadingText.style.display = "none";
                    // Show Preview Image
                    previewImage.style.display = 'block';

                    // Add Class (file-details--open) On (fileDetails)
                    fileDetails.classList.add('file-details--open');
                    // Add Class (uploaded-file--open) On (uploadedFile)
                    uploadedFile.classList.add('uploaded-file--open');
                    // Add Class (uploaded-file__info--active) On (uploadedFileInfo)
                    uploadedFileInfo.classList.add('uploaded-file__info--active');
                }, 500); // 0.5s

                // Add The (fileReader) Result Inside (previewImage) Source
                previewImage.setAttribute('src', fileReader.result);

                // Add File Name Inside Uploaded File Name
                uploadedFileName.innerHTML = file.name;

                // Call Function progressMove();
                progressMove();
            });

            // Read (file) As Data Url
            fileReader.readAsDataURL(file);
        } else { // Else

            this; // (this) Represent The fileValidate(fileType, fileSize) Function

        };
    };

    // Progress Counter Increase Function
    function progressMove() {
        // Counter Start
        let counter = 0;

        // After 600ms
        setTimeout(() => {
            // Every 100ms
            let counterIncrease = setInterval(() => {
                // If (counter) is equle 100
                if (counter === 100) {
                    // Stop (Counter Increase)
                    clearInterval(counterIncrease);
                } else { // Else
                    // plus 10 on counter
                    counter = counter + 10;
                    // add (counter) vlaue inisde (uploadedFileCounter)
                    uploadedFileCounter.innerHTML = `${counter}%`
                }
            }, 100);
        }, 600);
    };


    // Simple File Validate Function
    function fileValidate(fileType, fileSize) {
        // File Type Validation
        let isImage = imagesTypes.filter((type) => fileType.indexOf(`image/${type}`) !== -1);

        // If The Uploaded File Type Is 'jpeg'
        if (isImage[0] === 'jpeg') {
            // Add Inisde (uploadedFileIconText) The (jpg) Value
            uploadedFileIconText.innerHTML = 'jpg';
        } else { // else
            // Add Inisde (uploadedFileIconText) The Uploaded File Type
            uploadedFileIconText.innerHTML = isImage[0];
        };

        // If The Uploaded File Is An Image
        if (isImage.length !== 0) {
            // Check, If File Size Is 2MB or Less
            if (fileSize <= 2000000) { // 2MB :)
                return true;
            } else { // Else File Size
                return alert('Please Your File Should be 2 Megabytes or Less');
            };
        } else { // Else File Type
            return alert('Please make sure to upload An Image File Type');
        };
    };

</script>
</body>
</html>